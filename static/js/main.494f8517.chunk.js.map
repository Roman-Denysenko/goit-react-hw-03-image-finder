{"version":3,"sources":["components/imageGalleryItem/ImageGalleryItem.module.css","components/button/Button.module.css","components/modal/Modal.module.css","components/imageGallery/ImageGallery.module.css","components/searchbar/searchbar.js","services/pixabayApi.js","components/imageGalleryItem/imageGalleryItem.js","components/button/button.js","components/modal/modal.js","components/imageGallery/imageGallery.js","App.js","index.js","components/searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","search","handleChangeForm","e","value","target","setState","handleSubmit","preventDefault","props","onSubmit","this","className","s","SearchForm","type","buttonForm","labelForm","onChange","inputForm","autoComplete","autoFocus","placeholder","Component","handleFetchApi","page","handleIncrementPage","a","fetch","response","data","json","ImageGalleryItem","id","webformatURL","tags","src","alt","ImageGalleryItemImage","Button","onClick","buttonContainer","button","modalRoot","document","querySelector","Modal","handleEscClose","code","onClose","handleModalCloseOnClick","currentTarget","window","addEventListener","removeEventListener","modalItem","largeImageURL","createPortal","overlay","modal","Status","ImageGallery","photos","status","error","handleClearPage","handleLoadMore","nextSearch","onSearch","then","hits","length","scrollTo","top","documentElement","scrollHeight","behavior","catch","toggleModal","handleOpenModal","attributes","currentPhoto","find","photo","includes","prevProps","prevState","prevSearch","Promise","reject","Error","color","height","width","timeout","imageGallery","map","message","App","handleTakeDataFromForm","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.494f8517.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__18JML\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3G0g6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2bfgu\",\"buttonContainer\":\"Button_buttonContainer__2Cz9J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1QUwB\",\"modal\":\"Modal_modal__1jr5O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2dK1u\",\"error\":\"ImageGallery_error__2qUqF\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n  };\n\n  state = {\n    search: '',\n  };\n\n  handleChangeForm = e => {\n    const { value } = e.target;\n    this.setState({ search: value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { search } = this.state;\n    this.props.onSubmit(search);\n    this.setState({\n      search: '',\n    });\n  };\n\n  render() {\n    const { search } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.buttonForm}>\n            <span className={s.labelForm}>Search</span>\n          </button>\n\n          <input\n            onChange={this.handleChangeForm}\n            value={search}\n            className={s.inputForm}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","const KEY = `19168514-abe4fd6e9277293fb68a0fc7f`;\nconst URL = `https://pixabay.com/api`;\n\nexport const handleFetchApi = async (search, page, handleIncrementPage) => {\n  try {\n    const response = await fetch(\n      `${URL}/?key=${KEY}&q=${search}&image_type=photo&orientation=horizontal&page=${page}&per_page=12`,\n    );\n    const data = response.json();\n    handleIncrementPage();\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ id, webformatURL, tags }) => {\n  return (\n    <li key={id} className={s.ImageGalleryItem}>\n      <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.string,\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  const handleClick = () => {\n    onClick();\n  };\n\n  return (\n    <div className={s.buttonContainer}>\n      <button type=\"button\" className={s.button} onClick={handleClick}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    largeImageURL: PropTypes.string,\n    tags: PropTypes.string,\n    onClose: PropTypes.func,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleEscClose);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleEscClose);\n  }\n\n  handleEscClose = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleModalCloseOnClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL, tags } = this.props.modalItem;\n\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleModalCloseOnClick}>\n        <div className={s.modal}>\n          <img src={largeImageURL} alt={tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { handleFetchApi } from '../../services/pixabayApi';\nimport ImageGalleryItem from '../imageGalleryItem';\nimport Button from '../button';\nimport Modal from '../modal';\n\nimport Loader from 'react-loader-spinner';\nimport s from './ImageGallery.module.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    onSearch: PropTypes.string,\n  };\n\n  state = {\n    photos: [],\n    search: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n    button: false,\n    modal: false,\n    modalItem: null,\n  };\n\n  componentDidMount() {\n    this.handleClearPage();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearch = prevProps.onSearch;\n    const nextSearch = this.props.onSearch;\n    const { page } = this.state;\n\n    if (prevSearch !== nextSearch) {\n      this.handleClearPage();\n      this.setState({\n        status: Status.PENDING,\n      });\n\n      handleFetchApi(nextSearch, page, this.handleIncrementPage)\n        .then(({ hits }) => {\n          if (hits.length === 12) {\n            this.setState({ button: true });\n          }\n\n          this.setState({ photos: hits, status: Status.RESOLVED });\n          if (hits.length === 0) {\n            return Promise.reject(\n              new Error(`At your request  ${nextSearch}   nothing found`),\n            );\n          }\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n  }\n\n  handleIncrementPage = () => {\n    this.setState({\n      page: this.state.page + 1,\n    });\n  };\n\n  handleClearPage = () => {\n    this.setState({\n      page: 1,\n    });\n  };\n\n  handleLoadMore = () => {\n    const nextSearch = this.props.onSearch;\n    const { page, photos } = this.state;\n\n    handleFetchApi(nextSearch, page, this.handleIncrementPage)\n      .then(({ hits }) => {\n        this.setState({ button: true });\n\n        if (hits.length < 12) {\n          this.setState({ button: false });\n        }\n        this.setState({ photos: [...photos, ...hits] });\n\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  toggleModal = () => {\n    const { modal } = this.state;\n    this.setState({ modal: !modal });\n  };\n\n  handleOpenModal = e => {\n    if (e.target === e.currentTarget) {\n      return;\n    }\n\n    const { photos } = this.state;\n    const tags = e.target.attributes.src.value;\n\n    const currentPhoto = photos.find(photo =>\n      photo.webformatURL.includes(tags),\n    );\n\n    this.setState({ modalItem: currentPhoto });\n    this.toggleModal();\n  };\n\n  render() {\n    const { photos, status, error, button, modal, modalItem } = this.state;\n\n    if (modal) {\n      return <Modal onClose={this.toggleModal} modalItem={modalItem} />;\n    }\n\n    if (status === 'idle') {\n      return null;\n    }\n\n    if (status === 'pending') {\n      return (\n        <Loader\n          type=\"Audio\"\n          color=\"#00BFFF\"\n          height={80}\n          width={200}\n          timeout={5000}\n        />\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.imageGallery} onClick={this.handleOpenModal}>\n            {photos.map(ImageGalleryItem)}\n          </ul>\n          {button && <Button onClick={this.handleLoadMore} />}\n        </>\n      );\n    }\n\n    if (status === 'rejected') {\n      return <div className={s.error}>{error.message}</div>;\n    }\n  }\n}\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\n\nimport Searchbar from './components/searchbar';\nimport ImageGallery from './components/imageGallery';\n\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    search: '',\n  };\n\n  handleTakeDataFromForm = data => {\n    this.setState({\n      search: data,\n    });\n  };\n\n  render() {\n    const { search } = this.state;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.handleTakeDataFromForm} />,\n        <ImageGallery onSearch={search} />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2w-3v\",\"SearchForm\":\"Searchbar_SearchForm__YHYeK\",\"buttonForm\":\"Searchbar_buttonForm__3eR36\",\"labelForm\":\"Searchbar_labelForm__1n3cr\",\"inputForm\":\"Searchbar_inputForm__1_uIy\"};"],"sourceRoot":""}